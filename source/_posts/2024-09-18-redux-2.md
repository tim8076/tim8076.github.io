---
title: Redux (2) 安裝 Redux
date: 2024-09-18 13:23:12
categories: Redux
tags: Redux
description: "在 create-react-app 專案中新增 redux"
---

## 安裝 redux

1. 先替專案的 App.js 複製一份副本 App1.js

2. 安裝 redux

```
npm install @reduxjs/toolkit
npm install react-redux
```

3. src 資料夾下建立 store.js

```js
// store.js
import { configureStore } from "@reduxjs/toolkit";

export const store = configureStore({});
```

4. 引入 store

在 index.js 內引入 store 和 Provider，Provider 包在 App 元件外層，並傳入 store props ，App 元件即可取得 store 資料。

```js
import { store } from "./store";
import { Provider } from "react-redux";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>
);
```

5. 建立 slice

在 src 料夾底下新增 slice 資料夾，並在內新增 todosSlice.js，並將 todoSlice.reducer 匯出

```js
// src/todosSlice.js
import { createSlice } from "@reduxjs/toolkit";

export const todoSlice = createSlice({
  name: "todos",
  initialState: [
    {
      id: 1,
      text: "這是一段話(副本)",
    },
  ],
});

export default todoSlice.reducer;
```

6. 引入 slice

在 store.js 內 引入 slice

```js
import { configureStore } from "@reduxjs/toolkit";
import todoReducer from "./slice/todosSlice";

export const store = configureStore({
  reducer: {
    todos: todoReducer,
  },
});
```

9. 在元件內取得 store 資料

使用 useSelector 取得 store 內 todos 的資料

```js
// App.js
import { useSelector } from "react-redux";
function TodoList() {
  const todos = useSelector((state) => {
    return state.todos;
  });
}
```
