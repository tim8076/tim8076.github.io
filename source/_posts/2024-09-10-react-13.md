---
title: React Hooks (10) useReducer
date: 2024-09-10 13:49:46
categories: React
tags: React
description: '介紹 useReducer 整合相關資料集'
---

## 基本用法

``` js
const [products, setProducts] = useState(sampleData);
const [ascending, setAscending] = useState(true);
const [search, setSearch] = useState('');
const [items, setItems] = useState([]);
```

當有一些資料處理的是相關的邏輯時，如上都是和 products 有關的邏輯，可以用 useReducer 整合在一起

1. 將 useReducer 方法解構出來

``` js
const { useState, useReducer } = React;
```

2. 建立資料和方法

``` js
const App = () => {
  const [state, dispatch] = useReducer(
    function (state, action) { // state, action
      switch (action.type) {
        case 'INCREMENT':
          return {
            num: state.num + 1
          }
          break;
        case 'DECREMENT':
          return {
            num: state.num - 1
          }
          break;
        case 'SET_NUM':
          return {
            num: action.payload,
          }
          break;
        default:
          break;
      }
      return state;
    },
    { num: 5 },
  );
```

`useReducer()` 函式第一個參數會帶入一個函式，第二個參數則會帶入物件(定義資料)，之後就可將 state, dispatch 解構出來給元件使用。

3. 元件內使用 資料與方法

``` JS
function increment() {
  dispatch({
    type: 'INCREMENT',
  })
}
function decrement() {
  dispatch({
    type: 'DECREMENT',
  })
}

function setNum(e) {
  dispatch({
    type: 'SET_NUM',
    payload: parseInt(e.target.value),
  })
}
<button type="button" onClick={() => decrement() }>-</button>
{state.num}
<button type="button" onClick={() => increment() }>+</button>
<input type="number" value={state.num} onChange={ e => setNum(e)} />
```

元件觸發事件後呼叫 dispatch 方法來修改 state 的值，type 指定事件名稱，如果有參數帶入，則放在 payload 裡。

## 實作範例

[範例](https://codepen.io/jskrtivy-the-animator/pen/ExBrJWE?editors=1112)

上面範例將 products 相關狀態都整合進 useReducer裡。



