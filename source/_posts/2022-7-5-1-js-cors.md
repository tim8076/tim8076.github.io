---
title: Ajax解說系列(5) CORS
date: 2022-07-05 16:28:40
categories: Javascript
tags: 
- Javascript
- cors
description: '了解CORS產生的原因'
---

## Cross-Origin Resource Sharing

當我們使用 XMLHttpRequest 或 fecth等方式向伺服器發送請求時，都必須遵守都遵守同源政策（same-origin policy），只能請求與應用程式相同網域的 HTTP 資源。

### 同源定義

所謂同源是指兩份網頁具備相同協定、埠號 (如果有指定) 以及主機位置，下表提供了一些例子展示那些來源和 http://store.company.com/dir/page.html 屬於同源:

```
URL	Outcome	Reason
http://store.company.com/dir2/other.html	同源	
http://store.company.com/dir/inner/another.html	同源	
https://store.company.com/secure.html	不同源	協定不同
http://store.company.com:81/dir/etc.html	不同源	埠號不同
http://news.company.com/dir/other.html	不同源	主機位置不同
```

### 跨來源引入

在某些情況下跨來源是被允許的，不受同源策略限制

1. 跨來源嵌入通常被允許 (embed)

<script src=”…”></script>、<link rel=”stylesheet” href=”…”>、<iframe>、圖片 <img>、<video>、或是 @font-face <object> 、 <embed>.等等都是跨來源嵌入。這些標籤可以拿到的資源是有限制的。再者，這些取得回來的資源，沒辦法用程式去讀取它，所以開放嵌入。

2. 跨來源寫入通常被允許 (writes)

可以在藉由<form>在domain-a.com 發 request 給 domain-b.com，當然透過連結 links 或直接 redirect 到別的網站也是被允許的。


## CORS

跨來源資源共用（CORS），則是一種使用額外 HTTP 標頭令目前瀏覽網站的使用者代理取得存取其他來源（網域）伺服器特定資源權限的機制。

當對方開啟 CORS，就能存取跨網域的資源。

使用 api 前可以到，[test-cors.org](https://test-cors.org/) 網站測試 api

結果 200 代表可串接
結果 0 代表不能跨網域串接
